<!doctype html>
<html lang="zh-cn" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<link rel="alternate" type="application/rss+xml" href="/zh-cn/blog/rss.xml" title="Sureness RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-cn/blog/atom.xml" title="Sureness Atom Feed">
<link rel="alternate" type="application/json" href="/zh-cn/blog/feed.json" title="Sureness JSON Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Sureness" href="/zh-cn/opensearch.xml">


<link rel="icon" href="/zh-cn/https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon64.png">
<link rel="manifest" href="/zh-cn/https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/manifest.json">
<meta name="theme-color" content="rgb(234, 90, 7)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/zh-cn/https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon64.png">
<link rel="mask-icon" href="/zh-cn/https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon64.svg" color="rgb(234, 90, 7)">
<meta name="msapplication-TileImage" content="/zh-cn/https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon64.png">
<meta name="msapplication-TileColor" content="#000">

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;600&display=block">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&display=block">
<script src="https://cdn.jsdelivr.net/gh/buttons/buttons.github.io/buttons.js"></script><title data-rh="true">Using Sureness to secure Javalin REST API | Sureness</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon128.png"><meta data-rh="true" name="twitter:image" content="https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon128.png"><meta data-rh="true" property="og:url" content="https://su.usthe.com/zh-cn/blog/2021/04/16/sample-javalin"><meta data-rh="true" name="docusaurus_locale" content="zh-cn"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="zh-cn"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Using Sureness to secure Javalin REST API | Sureness"><meta data-rh="true" name="description" content="javalin-sureness sample repository"><meta data-rh="true" property="og:description" content="javalin-sureness sample repository"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-04-16T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/tomsun28"><meta data-rh="true" property="article:tag" content="integrate"><link data-rh="true" rel="icon" href="https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon64.png"><link data-rh="true" rel="canonical" href="https://su.usthe.com/zh-cn/blog/2021/04/16/sample-javalin"><link data-rh="true" rel="alternate" href="https://su.usthe.com/blog/2021/04/16/sample-javalin" hreflang="en"><link data-rh="true" rel="alternate" href="https://su.usthe.com/zh-cn/blog/2021/04/16/sample-javalin" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://su.usthe.com/blog/2021/04/16/sample-javalin" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://GNVT7Z0UI2-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/zh-cn/assets/css/styles.e6d26ab7.css">
<link rel="preload" href="/zh-cn/assets/js/runtime~main.f72a5029.js" as="script">
<link rel="preload" href="/zh-cn/assets/js/main.4be8b0a2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#7228B5;color:#fafbfc" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="announcementBarContent_xLdY"><font style="font-size: medium; font-weight: bolder">If you like Sureness,</font> <a target="_blank" style="font-size: medium; font-weight: bolder" rel="noopener noreferrer" href="https://github.com/dromara/sureness">give us a star on GitHub </a> <font style="font-size: medium; font-weight: bolder"> or </font><a target="_blank" style="font-size: medium; font-weight: bolder" rel="noopener noreferrer" href="https://gitee.com/dromara/sureness">Gitee! </a>⭐️</div><button type="button" class="clean-btn close announcementBarClose_gvF7" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-cn/"><div class="navbar__logo"><img src="https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon128.svg" alt="Focus on Protection of API" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon128.svg" alt="Focus on Protection of API" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"> </b></a><a class="navbar__item navbar__link" href="/zh-cn/docs/">文档</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh-cn/blog">博客</a><a href="https://github.com/dromara/sureness/projects/1" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">看板<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/tomsun28/sureness-shiro-spring-security-benchmark" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">高性能<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">讨论</a><ul class="dropdown__menu"><li><a href="https://github.com/dromara/sureness/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">Github Discussion<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://gitter.im/usthe/sureness" target="_blank" rel="noopener noreferrer" class="dropdown__link">Gitter Channel<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://qm.qq.com/cgi-bin/qm/qr?k=3IpzQjFOztJe464_eMBmDHfT0YTWK5Qa&amp;jump_from=webapi" target="_blank" rel="noopener noreferrer" class="dropdown__link">QQ 群 - 390083213<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">其它</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh-cn/docs/design">设计文档</a></li><li><a class="dropdown__link" href="/zh-cn/docs/contributing">参与贡献</a></li><li><a class="dropdown__link" href="/zh-cn/docs/sponsor">赞助</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文（中国）</a><ul class="dropdown__menu"><li><a href="/blog/2021/04/16/sample-javalin" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/zh-cn/blog/2021/04/16/sample-javalin" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">中文（中国）</a></li></ul></div><a href="https://github.com/dromara/sureness" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/2021/06/06/step-by-step">使用Sureness一步一步搭建一个完整认证鉴权项目</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/2021/04/29/sample-micronaut">Using Sureness to secure micronaut REST API</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/zh-cn/blog/2021/04/16/sample-javalin">Using Sureness to secure Javalin REST API</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">Using Sureness to secure Javalin REST API</h1><div class="container_mt6G margin-vert--md"><time datetime="2021-04-16T00:00:00.000Z" itemprop="datePublished">2021年4月16日</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/tomsun28" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/24788200?s=400&amp;v=4" alt="tom"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/tomsun28" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">tom</span></a></div><small class="avatar__subtitle" itemprop="description">Java Engineer</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p><a href="https://github.com/tomsun28/sureness/tree/master/samples/javalin-sureness" target="_blank" rel="noopener noreferrer">javalin-sureness sample repository</a></p><p>Using Sureness to secure Javalin REST API by providing authentication(JWT,Basic,Digest) and authorization(RBAC)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-you-will-learn">What You Will Learn<a class="hash-link" href="#what-you-will-learn" title="Direct link to heading">​</a></h2><ul><li>Creating a simple REST API using Javalin</li><li>Learn how to integrate Sureness into a Javalin application</li><li>Learn how to issue a JWT</li><li>Test API authentication - use JWT Auth, Basic Auth, Digest Auth to test the security of the REST API</li><li>Test API authorization - use different users to verify that they can access the REST API</li></ul><p>The tutorial assumes that you know what  JWT, Basic Auth, Digest Auth, RBAC are. If you
do not, then you can check <a href="https://jwt.io/introduction/" target="_blank" rel="noopener noreferrer">jwt</a>, <a href="https://docs.oracle.com/cd/E50612_01/doc.11122/user_guide/content/authn_http_basic.html" target="_blank" rel="noopener noreferrer">basic auth</a> , <a href="https://docs.oracle.com/cd/E50612_01/doc.11122/user_guide/content/authn_http_digest.html" target="_blank" rel="noopener noreferrer">digest auth</a>, <a href="https://en.wikipedia.org/wiki/Role-based_access_control" target="_blank" rel="noopener noreferrer">rbac</a> for an introduction.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-dependencies">Setting Up Dependencies<a class="hash-link" href="#setting-up-dependencies" title="Direct link to heading">​</a></h2><p>First, you will need to create a maven project and add Javalin, Sureness dependencies coordinate</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;io.javalin&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;artifactId&gt;javalin&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;version&gt;{{site.javalinversion}}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;com.usthe.sureness&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;artifactId&gt;sureness-core&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;version&gt;1.0.2&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;version&gt;1.7.30&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-javalin-and-create-rest-api">Setting Up Javalin and Create REST API<a class="hash-link" href="#setting-up-javalin-and-create-rest-api" title="Direct link to heading">​</a></h2><p>We need to create a simple Javalin app and provide some  REST API for test.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        // init javalin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Javalin app = Javalin.create().start(8088);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        // create simple rest api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // simple rest api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app.routes(() -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            path(&quot;api&quot;, () -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                path(&quot;v3&quot;, () -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    get(&quot;host&quot;, ctx -&gt; ctx.result(&quot;get /api/v3/host success&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    put(&quot;book&quot;, ctx -&gt; ctx.result(&quot;put /api/v3/book success&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                path(&quot;v2&quot;, () -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    path(&quot;host&quot;, () -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        get(ctx -&gt; ctx.result(&quot;get /api/v2/host success&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        post(ctx -&gt; ctx.result(&quot;post /api/v2/host success&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        put(ctx -&gt; ctx.result(&quot;put /api/v2/host success&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        delete(ctx -&gt; ctx.result(&quot;delete /api/v2/host success&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                path(&quot;v1&quot;, () -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    path(&quot;source1&quot;, () -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        get(ctx -&gt; ctx.result(&quot;get /api/v1/source1 success&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        post(ctx -&gt; ctx.result(&quot;post /api/v1/source1 success&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        put(ctx -&gt; ctx.result(&quot;put /api/v1/source1 success&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        delete(ctx -&gt; ctx.result(&quot;delete /api/v1/source1 success&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-sureness">Setting Up Sureness<a class="hash-link" href="#setting-up-sureness" title="Direct link to heading">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-use-the-default-configuration-to-configure-sureness">1. Use the Default Configuration to Configure Sureness<a class="hash-link" href="#1-use-the-default-configuration-to-configure-sureness" title="Direct link to heading">​</a></h4><p>The default configuration -<code>DefaultSurenessConfig</code> uses the document datasource <code>sureness.yml</code> as the auth datasource.<br>
<!-- -->It supports JWT, Basic Auth, Digest Auth authentication.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // init sureness default config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new DefaultSurenessConfig();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-config-document-datasource---surenessyml">2. Config Document Datasource - <code>sureness.yml</code><a class="hash-link" href="#2-config-document-datasource---surenessyml" title="Direct link to heading">​</a></h4><p>Sureness authentication requires us to provide our own account data, role permission data. These data may come from document, databases,, annotations, etc. When we use sureness default configuration above, the datasource is document - <code>sureness.yml</code>.</p><p>Create a file named <code>sureness.yml</code> in the <code>resource</code> directory. Configure account data, role permission data in the <code>sureness.yml</code>.  eg:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">## -- sureness.yml document dataSource-- ##</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># load api resource which need be protected, config role who can access these resource.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># resources that are not configured are also authenticated and protected by default, but not authorized</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># eg: /api/v2/host===post===[role2,role3] means /api/v2/host===post can be access by role2,role3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># eg: /api/v1/source2===get===[] means /api/v1/source2===get can not be access by any role</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">resourceRole</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /api/v1/source1===get===</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">role2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /api/v1/source1===post===</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">role1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /api/v1/source1===delete===</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">role3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /api/v1/source1===put===</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">role1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">role2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /api/v1/source2===get===</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /api/v2/host===post===</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">role2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">role3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /api/v2/host===get===</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">role2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">role3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /api/v2/host===delete===</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">role2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">role3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /api/v2/host===put===</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">role2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">role3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /api/v3/</span><span class="token important">*===*===</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">role1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">role2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">role3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># load api resource which do not need be protected, means them need be excluded.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># these api resource can be access by everyone</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">excludedResource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /api/v3/host===get</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /</span><span class="token important">**/*.html===get</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /</span><span class="token important">**/*.js===get</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /</span><span class="token important">**/*.css===get</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /</span><span class="token important">**/*.ico===get</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># account info</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># there are three account: admin, root, tom</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># eg: admin has [role1,role2] ROLE, unencrypted password is admin, encrypted password is 0192023A7BBD73250516F069DF18B500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># eg: root has role1, unencrypted password is 23456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># eg: tom has role3, unencrypted password is 32113</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">account</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">appId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># if add salt, the password is encrypted password - the result: MD5(password+salt)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># digest auth not support encrypted password</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># if no salt, the password is unencrypted password</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">credential</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 0192023A7BBD73250516F069DF18B500</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">salt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">role</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">role1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">role2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">appId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">credential</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">role</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">role1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">role2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">appId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">credential</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">32113</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">role</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">role3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-add-an-interceptor-intercepting-all-requests">3. Add an Interceptor Intercepting All Requests<a class="hash-link" href="#3-add-an-interceptor-intercepting-all-requests" title="Direct link to heading">​</a></h4><p>The essence of sureness is to intercept all rest requests for authenticating and authorizing.     The interceptor can be a filter or interceptor, it intercepts all request to check them. In Javalin, we use <code>app.before()</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        // intercept all rest requests for authenticating and authorizing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app.before(ctx -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SubjectSum subject = SurenessSecurityManager.getInstance().checkIn(ctx.req);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // when auth error , the exception throw, you should use app.exception() catch it and define return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (subject != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SurenessContextHolder.bindSubject(subject);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app.after(ctx -&gt;  SurenessContextHolder.unbindSubject());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-last-implement-auth-exception-handling-process">4. Last, Implement Auth Exception Handling Process<a class="hash-link" href="#4-last-implement-auth-exception-handling-process" title="Direct link to heading">​</a></h4><p>Sureness uses exception handling process:</p><ul><li>If auth success, method - <code>checkIn()</code> will return a <code>SubjectSum</code> object containing user information.</li><li>If auth failure, method - <code>checkIn()</code> will throw different types of auth exceptions.</li></ul><p>We need to continue the subsequent process based on these exceptions.(eg: return the request response)</p><p>Here we need to customize the exceptions thrown by <code>checkIn</code>, passed directly when auth success, catch exception when auth failure and do something:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        // when auth error , the exception throw, you should use app.exception() catch it and define return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app.exception(UnknownAccountException.class, (e, ctx) -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.debug(&quot;this request user account not exist&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ctx.status(401).result(e.getMessage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }).exception(IncorrectCredentialsException.class, (e, ctx) -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.debug(&quot;this account credential is incorrect&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ctx.status(401).result(e.getMessage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }).exception(ExpiredCredentialsException.class, (e, ctx) -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.debug(&quot;this account credential expired&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ctx.status(401).result(e.getMessage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }).exception(NeedDigestInfoException.class, (e, ctx) -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.debug(&quot;you should try once again with digest auth information&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ctx.status(401).header(&quot;WWW-Authenticate&quot;, e.getAuthenticate());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }).exception(UnauthorizedException.class, (e, ctx) -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.debug(&quot;this account can not access this resource&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ctx.status(403).result(e.getMessage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }).exception(Exception.class, (e, ctx) -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.error(&quot;other exception happen: &quot;, e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ctx.status(500).result(e.getMessage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="provide-an-issue-jwt-api">Provide an Issue JWT Api<a class="hash-link" href="#provide-an-issue-jwt-api" title="Direct link to heading">​</a></h2><p>Now we provide a REST API to issue JWT. We can use this JWT to test JWT auth.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">       // issue jwt rest api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app.get(&quot;/auth/token&quot;, ctx -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SubjectSum subjectSum = SurenessContextHolder.getBindSubject();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (subjectSum == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ctx.result(&quot;Please auth!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                String principal = (String) subjectSum.getPrincipal();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                List&lt;String&gt; roles = (List&lt;String&gt;) subjectSum.getRoles();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // issue jwt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                String jwt = JsonWebTokenUtil.issueJwt(UUID.randomUUID().toString(), principal,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;token-server&quot;, 3600L, roles);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ctx.result(jwt);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>All done, we can test now!</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="test">Test<a class="hash-link" href="#test" title="Direct link to heading">​</a></h2><p>Through the above steps, a complete auth function project is completed. Someone maybe think that with only these few steps, where is its complete function and what can it support?<br>
<!-- -->This built project is based on the RBAC permission model and supports Baisc authentication, Digest authentication and JWT authentication. It can fine-grained control the user&#x27;s access to the restful api provided by the Javalin. That is to control which users can access which api.</p><p>Let&#x27;s test it. (we use postman and chrome to test.)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-authentication">Test Authentication<a class="hash-link" href="#test-authentication" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-basic-auth-test">1. Basic Auth Test<a class="hash-link" href="#1-basic-auth-test" title="Direct link to heading">​</a></h4><p>Use postman Basic auth, as shown below:</p><ul><li>success - input username: admin, password: admin</li></ul><p><img loading="lazy" alt="success" src="/zh-cn/assets/images/test1-af3495bc45a9116b5401c8c1b40f32eb.PNG" width="1280" height="552" class="img_ev3q"></p><ul><li>fail - input username: admin, password: 12345</li></ul><p><img loading="lazy" alt="fail" src="/zh-cn/assets/images/test2-04e523ebd1c8c584b328d365a6524ad1.PNG" width="1279" height="555" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-digest-auth-test">2. Digest Auth Test<a class="hash-link" href="#2-digest-auth-test" title="Direct link to heading">​</a></h4><p>Note: If password has been encrypted,  Digest auth not support.(So the account admin not support Digest auth).<br>
<!-- -->Use chrome to Digest auth, as shown below:</p><p><img loading="lazy" alt="success" src="/zh-cn/assets/images/test3-3ef3fd841ccac2285197c8ba50d7e93c.PNG" width="2422" height="375" class="img_ev3q"></p><p><img loading="lazy" alt="success" src="data:image/png;base64,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" width="1412" height="158" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-jwt-auth-test">3. JWT Auth Test<a class="hash-link" href="#3-jwt-auth-test" title="Direct link to heading">​</a></h4><p>First, we should access <strong>[GET /auth/token]</strong> api to get a JWT to use, as shown below:</p><p><img loading="lazy" alt="success" src="/zh-cn/assets/images/test5-3618d00ade7d90f24539c08ed3320bf1.PNG" width="1277" height="562" class="img_ev3q"></p><p>Then, use the JWT as Bearer Token to access REST API, as shown below:</p><p><img loading="lazy" alt="success" src="/zh-cn/assets/images/test6-05c520dab5b7dbbc0252e6bbbe9750b0.PNG" width="1287" height="561" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-authorization">Test Authorization<a class="hash-link" href="#test-authorization" title="Direct link to heading">​</a></h3><ul><li>success - user <strong>tom</strong> has role <strong>role3</strong>, the api <strong>[DELETE - /api/v2/host]</strong> support <strong>role3</strong> access, so <strong>tom</strong> can access api <strong>[DELETE - /api/v2/host]</strong> success, as shown below:</li></ul><p><img loading="lazy" alt="success" src="/zh-cn/assets/images/test7-ba23c5f0d743f865c1fc24ac44a7f06c.PNG" width="1288" height="564" class="img_ev3q"></p><ul><li>fail - user <strong>tom</strong> only has role <strong>role3</strong>, the api <strong>[GET - /api/v1/source1]</strong> only support <strong>role2</strong> access, not support <strong>role3</strong>,  so <strong>tom</strong> can not access api <strong>[GET - /api/v1/source1]</strong>, as shown below:</li></ul><p><img loading="lazy" alt="fail" src="/zh-cn/assets/images/test8-cd9aaab2d2d892093a58e62724a8da99.PNG" width="1283" height="557" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">​</a></h2><p>Javalin is a framework dedicated to simplicity and ease of use, and so is Sureness.<br>
<!-- -->We hope you enjoy this tutorial. Of course, the tutorial only introduces a simple introduction. Our account data, role permission data can not only be written in <code>sureness.yml</code>, but also loaded and obtained from the database and annotations. We can also customize the authentication method, data source, etc.<br>
<!-- -->Finally, thank you again for reading.</p><p><a href="https://github.com/usthe/sureness/tree/master/samples/javalin-sureness" target="_blank" rel="noopener noreferrer">DEMO SOURCE CODE ON GITHUB</a></p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh-cn/blog/tags/integrate">integrate</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/dromara/sureness/edit/master/home/i18n/zh-cn/docusaurus-plugin-content-blog/2021-04-16-sample-javalin.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>帮助我们修改文档</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh-cn/blog/2021/04/29/sample-micronaut"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Using Sureness to secure micronaut REST API</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-you-will-learn" class="table-of-contents__link toc-highlight">What You Will Learn</a></li><li><a href="#setting-up-dependencies" class="table-of-contents__link toc-highlight">Setting Up Dependencies</a></li><li><a href="#setting-up-javalin-and-create-rest-api" class="table-of-contents__link toc-highlight">Setting Up Javalin and Create REST API</a></li><li><a href="#setting-up-sureness" class="table-of-contents__link toc-highlight">Setting Up Sureness</a></li><li><a href="#provide-an-issue-jwt-api" class="table-of-contents__link toc-highlight">Provide an Issue JWT Api</a></li><li><a href="#test" class="table-of-contents__link toc-highlight">Test</a><ul><li><a href="#test-authentication" class="table-of-contents__link toc-highlight">Test Authentication</a></li><li><a href="#test-authorization" class="table-of-contents__link toc-highlight">Test Authorization</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">关于 Sureness</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/dromara/sureness" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitee.com/dromara/sureness" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/tomsun28/sureness-shiro-spring-security-benchmark" target="_blank" rel="noopener noreferrer" class="footer__link-item">高性能<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/dromara/sureness/projects/1" target="_blank" rel="noopener noreferrer" class="footer__link-item">看板<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">社区与交流</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://dromara.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dromara 社区<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/dromara/sureness/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitter.im/usthe/sureness" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter Channel<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://qm.qq.com/cgi-bin/qm/qr?k=3IpzQjFOztJe464_eMBmDHfT0YTWK5Qa&amp;jump_from=webapi" target="_blank" rel="noopener noreferrer" class="footer__link-item">QQ 群 - 390083213<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多相关</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blog.usthe.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tom 博客</a></li><li class="footer__item"><a href="https://github.com/usthe" target="_blank" rel="noopener noreferrer" class="footer__link-item">USTHE<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/tomsun28" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tom<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://github.com/dromara" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon64.svg" alt="Open Source Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon64.svg" alt="Open Source Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">Apache License 2.0 | Copyright © 2021</div></div></div></footer></div>
<script src="/zh-cn/assets/js/runtime~main.f72a5029.js"></script>
<script src="/zh-cn/assets/js/main.4be8b0a2.js"></script>
</body>
</html>