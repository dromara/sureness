<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<link rel="alternate" type="application/rss+xml" href="/sureness/blog/rss.xml" title="Sureness RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/sureness/blog/atom.xml" title="Sureness Atom Feed">
<link rel="alternate" type="application/json" href="/sureness/blog/feed.json" title="Sureness JSON Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Sureness" href="/sureness/opensearch.xml">


<link rel="icon" href="/sureness/https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon64.png">
<link rel="manifest" href="/sureness/https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/manifest.json">
<meta name="theme-color" content="rgb(234, 90, 7)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/sureness/https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon64.png">
<link rel="mask-icon" href="/sureness/https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon64.svg" color="rgb(234, 90, 7)">
<meta name="msapplication-TileImage" content="/sureness/https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon64.png">
<meta name="msapplication-TileColor" content="#000">

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;600&display=block">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&display=block">
<script src="https://cdn.jsdelivr.net/gh/buttons/buttons.github.io/buttons.js"></script><title data-rh="true">使用Sureness一步一步搭建一个完整认证鉴权项目 | Sureness</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon128.png"><meta data-rh="true" name="twitter:image" content="https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon128.png"><meta data-rh="true" property="og:url" content="https://dromara.org/sureness/blog/2021/06/06/step-by-step"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="使用Sureness一步一步搭建一个完整认证鉴权项目 | Sureness"><meta data-rh="true" name="description" content="下面我们来一步一步基于springboot,sureness搭建一个如下功能的认证鉴权系统。"><meta data-rh="true" property="og:description" content="下面我们来一步一步基于springboot,sureness搭建一个如下功能的认证鉴权系统。"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-06-06T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/tomsun28"><meta data-rh="true" property="article:tag" content="integrate,startup"><link data-rh="true" rel="icon" href="https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon64.png"><link data-rh="true" rel="canonical" href="https://dromara.org/sureness/blog/2021/06/06/step-by-step"><link data-rh="true" rel="alternate" href="https://dromara.org/sureness/blog/2021/06/06/step-by-step" hreflang="en"><link data-rh="true" rel="alternate" href="https://dromara.org/sureness/zh-cn/blog/2021/06/06/step-by-step" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://dromara.org/sureness/blog/2021/06/06/step-by-step" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://GNVT7Z0UI2-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/sureness/assets/css/styles.e6d26ab7.css">
<link rel="preload" href="/sureness/assets/js/runtime~main.98bdab67.js" as="script">
<link rel="preload" href="/sureness/assets/js/main.d214d83c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#7228B5;color:#fafbfc" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="announcementBarContent_xLdY"><font style="font-size: medium; font-weight: bolder">If you like Sureness,</font> <a target="_blank" style="font-size: medium; font-weight: bolder" rel="noopener noreferrer" href="https://github.com/dromara/sureness">give us a star on GitHub </a> <font style="font-size: medium; font-weight: bolder"> or </font><a target="_blank" style="font-size: medium; font-weight: bolder" rel="noopener noreferrer" href="https://gitee.com/dromara/sureness">Gitee! </a>⭐️</div><button type="button" class="clean-btn close announcementBarClose_gvF7" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/sureness/"><div class="navbar__logo"><img src="https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon128.svg" alt="Focus on Protection of API" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon128.svg" alt="Focus on Protection of API" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"> </b></a><a class="navbar__item navbar__link" href="/sureness/docs/">Document</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/sureness/blog">Blog</a><a href="https://github.com/dromara/sureness/projects/1" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Dashboard<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/tomsun28/sureness-shiro-spring-security-benchmark" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">High Performance<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Discuss</a><ul class="dropdown__menu"><li><a href="https://github.com/dromara/sureness/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">Github Discussion<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://gitter.im/usthe/sureness" target="_blank" rel="noopener noreferrer" class="dropdown__link">Gitter Channel<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://qm.qq.com/cgi-bin/qm/qr?k=3IpzQjFOztJe464_eMBmDHfT0YTWK5Qa&amp;jump_from=webapi" target="_blank" rel="noopener noreferrer" class="dropdown__link">QQ Group - 390083213<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Other</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/sureness/docs/design">Design</a></li><li><a class="dropdown__link" href="/sureness/docs/contributing">Contributing</a></li><li><a class="dropdown__link" href="/sureness/docs/sponsor">Sponsor</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/sureness/blog/2021/06/06/step-by-step" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li><li><a href="/sureness/zh-cn/blog/2021/06/06/step-by-step" target="_self" rel="noopener noreferrer" class="dropdown__link">中文（中国）</a></li></ul></div><a href="https://github.com/dromara/sureness" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/sureness/blog/2021/06/06/step-by-step">使用Sureness一步一步搭建一个完整认证鉴权项目</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/sureness/blog/2021/04/29/sample-micronaut">Using Sureness to secure micronaut REST API</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/sureness/blog/2021/04/16/sample-javalin">Using Sureness to secure Javalin REST API</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">使用Sureness一步一步搭建一个完整认证鉴权项目</h1><div class="container_mt6G margin-vert--md"><time datetime="2021-06-06T00:00:00.000Z" itemprop="datePublished">June 6, 2021</time> · <!-- -->12 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/tomsun28" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/24788200?s=400&amp;v=4" alt="tom"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/tomsun28" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">tom</span></a></div><small class="avatar__subtitle" itemprop="description">Java Engineer</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>下面我们来一步一步基于springboot,sureness搭建一个如下功能的认证鉴权系统。  </p><ol><li>使用了配置文件来作为系统的账户数据和权限数据的数据源。   </li><li>系统基于rbac权限模型，支持basic认证，digest认证，jwt认证。  </li><li>能细粒度的控制用户对系统提供的restful api的访问权限，即哪些用户能访问哪些api。  </li></ol><p>多说无益，快速开始！  </p><p>这里为了照顾到刚入门的同学，图文展示了每一步操作。有基础可直接略过。  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="初始化一个springboot-web工程">初始化一个springboot web工程<a class="hash-link" href="#初始化一个springboot-web工程" title="Direct link to heading">​</a></h3><p>在IDEA如下操作:  </p><p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2bc0a723ea74c86a75952cc486367cb~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q"></p><p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/00d3cd3a015b4a079c0b30da064139d0~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q"></p><p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3be963ed9c28493d9ddc3b48caab54af~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q"></p><p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2bcce3d56cb244b6967914a5b9b807c5~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="提供一些模拟的restful-api">提供一些模拟的restful api<a class="hash-link" href="#提供一些模拟的restful-api" title="Direct link to heading">​</a></h3><p>新建一个controller, 在里面实现一些简单的restful api供外部测试调用  </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * simulate api controller, for testing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author tomsun28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 17:35 2019-05-12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SimulateController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /** access success message **/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String SUCCESS_ACCESS_RESOURCE = &quot;access this resource success&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;/api/v1/source1&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ResponseEntity&lt;String&gt; api1Mock1() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ResponseEntity.ok(SUCCESS_ACCESS_RESOURCE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PutMapping(&quot;/api/v1/source1&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ResponseEntity&lt;String&gt; api1Mock3() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ResponseEntity.ok(SUCCESS_ACCESS_RESOURCE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @DeleteMapping(&quot;/api/v1/source1&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ResponseEntity&lt;String&gt; api1Mock4() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ResponseEntity.ok(SUCCESS_ACCESS_RESOURCE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;/api/v1/source2&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ResponseEntity&lt;String&gt; api1Mock5() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ResponseEntity.ok(SUCCESS_ACCESS_RESOURCE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;/api/v1/source2/{var1}/{var2}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ResponseEntity&lt;String&gt; api1Mock6(@PathVariable String var1, @PathVariable Integer var2 ) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ResponseEntity.ok(SUCCESS_ACCESS_RESOURCE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostMapping(&quot;/api/v2/source3/{var1}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ResponseEntity&lt;String&gt; api1Mock7(@PathVariable String var1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ResponseEntity.ok(SUCCESS_ACCESS_RESOURCE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;/api/v1/source3&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ResponseEntity&lt;String&gt; api1Mock11(HttpServletRequest request) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ResponseEntity.ok(SUCCESS_ACCESS_RESOURCE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;/api/v2/source2&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ResponseEntity&lt;String&gt; api1Mock12() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ResponseEntity.ok(SUCCESS_ACCESS_RESOURCE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="项目中加入sureness依赖">项目中加入sureness依赖<a class="hash-link" href="#项目中加入sureness依赖" title="Direct link to heading">​</a></h3><p>在项目的pom.xml加入sureness的maven依赖坐标    </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.usthe.sureness&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;sureness-core&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;1.0.3&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如下：  </p><p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1c0df60e4bae4d4b80c0209f461fc8b5~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用默认配置来配置sureness">使用默认配置来配置sureness<a class="hash-link" href="#使用默认配置来配置sureness" title="Direct link to heading">​</a></h3><p>新建一个配置类，创建对应的sureness默认配置bean<br>
<!-- -->sureness默认配置使用了文件数据源<code>sureness.yml</code>作为账户权限数据源<br>
<!-- -->默认配置支持了<code>jwt, basic auth, digest auth</code>认证  </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SurenessConfiguration {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * sureness default config bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return default config bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DefaultSurenessConfig surenessConfig() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new DefaultSurenessConfig();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置默认文本配置数据源">配置默认文本配置数据源<a class="hash-link" href="#配置默认文本配置数据源" title="Direct link to heading">​</a></h3><p>认证鉴权当然也需要我们自己的配置数据:账户数据，角色权限数据等<br>
<!-- -->这些配置数据可能来自文本，关系数据库，非关系数据库<br>
<!-- -->我们这里使用默认的文本形式配置 - sureness.yml, 在resource资源目录下创建sureness.yml文件<br>
<!-- -->在sureness.yml文件里配置我们的角色权限数据和账户数据，如下：  </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">## -- sureness.yml文本数据源 -- ##</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 加载到匹配字典的资源,也就是需要被保护的,设置了所支持角色访问的资源</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 没有配置的资源也默认被认证保护,但不鉴权，例如/api/v1/source2===get</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># eg: /api/v1/source1===get===[role2] 表示 /api/v1/source1===get 这条资源支持 role2这一种角色访问</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># eg: /api/v2/source2===get===[] 表示 /api/v1/source2===get 这条资源不支持任何角色访问</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resourceRole:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - /api/v1/source1===get===[role2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - /api/v1/source1===delete===[role3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - /api/v1/source1===put===[role1,role2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - /api/v2/source2===get===[]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - /api/v1/source2/*/*===get===[role2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - /api/v2/source3/*===get===[role2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 需要被过滤保护的资源,不认证鉴权直接访问</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># /api/v1/source3===get 表示 /api/v1/source3===get 可以被任何人访问 无需登录认证鉴权</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">excludedResource:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - /api/v1/account/auth===post</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - /api/v1/source3===get</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - /**/*.html===get</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - /**/*.js===get</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - /**/*.css===get</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - /**/*.ico===get</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 用户账户信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 下面有 admin root tom三个账户</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># eg: admin 拥有[role1,role2]角色,明文密码为admin,加盐密码为0192023A7BBD73250516F069DF18B500</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># eg: root 拥有[role1],密码为明文23456</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># eg: tom 拥有[role3],密码为明文32113</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">account:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - appId: admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 如果填写了加密盐--salt,则credential为MD5(password+salt)的32位结果</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 没有盐认为不加密,credential为明文</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 若密码加盐 则digest认证不支持  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    credential: 0192023A7BBD73250516F069DF18B500</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    salt: 123</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role: [role1,role2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - appId: root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    credential: 23456</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role: [role1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - appId: tom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    credential: 32113</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role: [role3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="添加过滤器拦截所有请求对所有请求进行认证鉴权">添加过滤器拦截所有请求,对所有请求进行认证鉴权<a class="hash-link" href="#添加过滤器拦截所有请求对所有请求进行认证鉴权" title="Direct link to heading">​</a></h3><p>新建一个filter, 拦截所有请求，用sureness对所有请求进行认证鉴权。认证鉴权失败的请求sureness会抛出对应的异常，我们捕获响应的异常进行处理返回response即可。  </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Order(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@WebFilter(filterName = &quot;SurenessFilterExample&quot;, urlPatterns = &quot;/*&quot;, asyncSupported = true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SurenessFilterExample implements Filter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void init(FilterConfig filterConfig) {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void destroy() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SubjectSum subject = SurenessSecurityManager.getInstance().checkIn(servletRequest);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 认证鉴权成功则会返回带用户信息的subject 可以将subject信息绑定到当前线程上下文holder供后面使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (subject != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SurenessContextHolder.bindSubject(subject);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (ProcessorNotFoundException | UnknownAccountException | UnsupportedSubjectException e4) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 账户创建相关异常</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            responseWrite(ResponseEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .status(HttpStatus.BAD_REQUEST).body(e4.getMessage()), servletResponse);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (DisabledAccountException | ExcessiveAttemptsException e2 ) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 账户禁用相关异常</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            responseWrite(ResponseEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .status(HttpStatus.UNAUTHORIZED).body(e2.getMessage()), servletResponse);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (IncorrectCredentialsException | ExpiredCredentialsException e3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 认证失败相关异常</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            responseWrite(ResponseEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .status(HttpStatus.UNAUTHORIZED).body(e3.getMessage()), servletResponse);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (NeedDigestInfoException e5) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // digest认证需要重试异常</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            responseWrite(ResponseEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .status(HttpStatus.UNAUTHORIZED)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .header(&quot;WWW-Authenticate&quot;, e5.getAuthenticate()).build(), servletResponse);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (UnauthorizedException e6) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 鉴权失败相关异常，即无权访问此api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            responseWrite(ResponseEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .status(HttpStatus.FORBIDDEN).body(e6.getMessage()), servletResponse);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (RuntimeException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 其他异常</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            responseWrite(ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).build(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    servletResponse);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 若未抛出异常 则认证鉴权成功 继续下面请求流程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            filterChain.doFilter(servletRequest, servletResponse);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } finally {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SurenessContextHolder.clear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * write response json data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param content content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param response response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static void responseWrite(ResponseEntity content, ServletResponse response) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.setContentType(&quot;application/json;charset=utf-8&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ((HttpServletResponse)response).setStatus(content.getStatusCodeValue());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        content.getHeaders().forEach((key, value) -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ((HttpServletResponse) response).addHeader(key, value.get(0)));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try (PrintWriter printWriter = response.getWriter()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (content.getBody() != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (content.getBody() instanceof String) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    printWriter.write(content.getBody().toString());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ObjectMapper objectMapper = new ObjectMapper();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    printWriter.write(objectMapper.writeValueAsString(content.getBody()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                printWriter.flush();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (IOException e) {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>像上面一样，</p><ol><li>若认证鉴权成功,<code>checkIn</code>会返回包含用户信息的<code>SubjectSum</code>对象  </li><li>若中间认证鉴权失败，<code>checkIn</code>会抛出不同类型的认证鉴权异常,用户需根据这些异常来继续后面的流程(返回相应的请求响应)</li></ol><p>为了使filter在springboot生效 需要在boot启动类加注解 <code>@ServletComponentScan</code>   </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ServletComponentScan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class BootstrapApplication {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SpringApplication.run(BootstrapApplication.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="一切完毕验证测试">一切完毕，验证测试<a class="hash-link" href="#一切完毕验证测试" title="Direct link to heading">​</a></h3><p>通过上面的步骤 我们的一个完整功能认证鉴权项目就搭建完成了，有同学想 就这几步骤 它的完整功能体现在哪里啊 能支持啥。  </p><p>这个搭好的认证鉴权项目基于rbac权限模型，支持 baisc 认证，digest认证, jwt认证。能细粒度的控制用户对后台提供的restful api的访问权限，即哪些用户能访问哪些api。 我们这里来测试一下。 </p><p>IDEA上启动工程项目。  </p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="basic认证测试">basic认证测试<a class="hash-link" href="#basic认证测试" title="Direct link to heading">​</a></h5><p>资源api/v1/source2===get没有配置到文本数据源里，代表所有角色或无角色都可以访问 前提是认证成功，用该资源来做认证测试</p><p><strong>认证成功</strong>：  </p><p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a09f6caa4ef845adb9f5b5fa6e86040b~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q"></p><p><strong>密码错误</strong>：  </p><p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/caa656a9a9174df6afc8768dc859ecb6~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q"></p><p><strong>账户不存在</strong>：  </p><p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/37d8c0d0cd144b4fb8cfd5e0a47e6961~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="digest认证测试">digest认证测试<a class="hash-link" href="#digest认证测试" title="Direct link to heading">​</a></h5><p><strong>注意如果密码配置了加密盐，则无法使用digest认证</strong>  </p><p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/53fe5e08301c4171b31b6180a77b5837~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q"></p><p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c12598db019549efa5f990c0136e7582~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="jwt认证测试">jwt认证测试<a class="hash-link" href="#jwt认证测试" title="Direct link to heading">​</a></h5><p>jwt认证首先你得拥有一个签发的jwt，创建如下api接口提供jwt签发- <code>/api/v1/account/auth</code>  </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@RestController()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AccountController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final String APP_ID = &quot;appId&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * account data provider</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private SurenessAccountProvider accountProvider = new DocumentAccountProvider();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * login, this provider a get jwt api, convenient to test other api with jwt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param requestBody request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostMapping(&quot;/api/v1/account/auth&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ResponseEntity&lt;Object&gt; login(@RequestBody Map&lt;String,String&gt; requestBody) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (requestBody == null || !requestBody.containsKey(APP_ID)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                || !requestBody.containsKey(&quot;password&quot;)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return ResponseEntity.badRequest().build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String appId = requestBody.get(&quot;appId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String password = requestBody.get(&quot;password&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SurenessAccount account = accountProvider.loadAccount(appId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (account == null || account.isDisabledAccount() || account.isExcessiveAttempts()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return ResponseEntity.status(HttpStatus.FORBIDDEN).build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (account.getPassword() != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (account.getSalt() != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                password = Md5Util.md5(password + account.getSalt());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (!account.getPassword().equals(password)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return ResponseEntity.status(HttpStatus.FORBIDDEN).build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Get the roles the user has - rbac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;String&gt; roles = account.getOwnRoles();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        long refreshPeriodTime = 36000L;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // issue jwt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String jwt = JsonWebTokenUtil.issueJwt(UUID.randomUUID().toString(), appId,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;token-server&quot;, refreshPeriodTime &gt;&gt; 1, roles,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                null, Boolean.FALSE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map&lt;String, String&gt; body = Collections.singletonMap(&quot;token&quot;, jwt);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ResponseEntity.ok().body(body);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>请求api接口登录认证获取jwt</strong>    </p><p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3295df4eb54d4deb8498d3ae51aadcb8~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q"></p><p><strong>携带使用获取的jwt值请求api接口</strong>    </p><p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec0f95fe506946df8b14c8fab5ffd9f2~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q">
<img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fb6b8c67ec474e229ba37e62654651d5~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="鉴权测试">鉴权测试<a class="hash-link" href="#鉴权测试" title="Direct link to heading">​</a></h5><p>通过上面的sureness.yml文件配置的用户-角色-资源，我们可以关联下面几个典型测试点  </p><ol><li><code>/api/v1/source3===get</code>资源可以被任何直接访问，不需要认证鉴权  </li><li><code>api/v1/source2===get</code>资源持所有角色或无角色访问 前提是认证成功  </li><li>用户admin能访问<code>/api/v1/source1===get</code>资源,而用户root,tom无权限  </li><li>用户tom能访<code>/api/v1/source1===delete</code>资源，而用户admin.root无权限<br>测试如下：  </li></ol><p><strong><code>/api/v1/source3===get</code>资源可以被任何直接访问，不需要认证鉴权</strong><br>
<img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ae2b3db8d7b64c9abf18c243943f7a4d~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q"></p><p><strong><code>api/v1/source2===get</code>资源持所有角色或无角色访问 前提是认证成功</strong><br>
<img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ace184c86cc5438f91f7614b961dfab1~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q"></p><p><strong>用户admin能访问<code>/api/v1/source1===get</code>资源,而用户root,tom无权限</strong><br>
<img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f5fcd36befa84fb59b49c3cc35cb206e~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q">
<img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/45f9454365ef4a45abc90e436eb0d2f0~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q"></p><p><strong>用户tom能访<code>/api/v1/source1===delete</code>资源，而用户admin.root无权限</strong><br>
<img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e9bce40c97dd4aaf9924845922c4917b~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q">
<img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/209598b7717947c585bf479817b24726~tplv-k3u1fbpfcp-zoom-1.image" alt="image" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="其他">其他<a class="hash-link" href="#其他" title="Direct link to heading">​</a></h3><p>这次图文一步一步的详细描述了构建一个简单但完整的认证鉴权项目的流程，当然里面的授权账户等信息是写在配置文件里面的，实际的项目是会把这些数据写在数据库中。
万变不离其宗，无论是写配置文件还是数据库，它只是作为数据源提供数据，基于sureness我们也能轻松快速构建基于数据库的认证鉴权项目，支持动态刷新等各种功能。  </p><p>基于数据库方案的项目可参考下方样例-&gt;sureness集成springboot样例(数据库方案), 此次一步一步完成的系统源代码也在下方 -&gt; sureness集成springboot样例(配置文件方案)   </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="demo源代码仓库">DEMO源代码仓库<a class="hash-link" href="#demo源代码仓库" title="Direct link to heading">​</a></h4><p><a href="https://github.com/dromara/sureness/tree/master/sample-bootstrap" target="_blank" rel="noopener noreferrer">sureness集成springboot样例-配置文件方案</a><br>
<a href="https://github.com/dromara/sureness/tree/master/sample-tom" target="_blank" rel="noopener noreferrer">sureness集成springboot样例-数据库方案</a></p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/sureness/blog/tags/integrate">integrate</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/sureness/blog/tags/startup">startup</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/dromara/sureness/edit/master/home/blog/2021-06-06-step-by-step.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/sureness/blog/2021/04/29/sample-micronaut"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Using Sureness to secure micronaut REST API</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#初始化一个springboot-web工程" class="table-of-contents__link toc-highlight">初始化一个springboot web工程</a></li><li><a href="#提供一些模拟的restful-api" class="table-of-contents__link toc-highlight">提供一些模拟的restful api</a></li><li><a href="#项目中加入sureness依赖" class="table-of-contents__link toc-highlight">项目中加入sureness依赖</a></li><li><a href="#使用默认配置来配置sureness" class="table-of-contents__link toc-highlight">使用默认配置来配置sureness</a></li><li><a href="#配置默认文本配置数据源" class="table-of-contents__link toc-highlight">配置默认文本配置数据源</a></li><li><a href="#添加过滤器拦截所有请求对所有请求进行认证鉴权" class="table-of-contents__link toc-highlight">添加过滤器拦截所有请求,对所有请求进行认证鉴权</a></li><li><a href="#一切完毕验证测试" class="table-of-contents__link toc-highlight">一切完毕，验证测试</a></li><li><a href="#其他" class="table-of-contents__link toc-highlight">其他</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">About Sureness</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/dromara/sureness" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitee.com/dromara/sureness" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/tomsun28/sureness-shiro-spring-security-benchmark" target="_blank" rel="noopener noreferrer" class="footer__link-item">High Performance<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/dromara/sureness/projects/1" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dashboard<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://dromara.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dromara<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/dromara/sureness/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitter.im/usthe/sureness" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter Channel<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://qm.qq.com/cgi-bin/qm/qr?k=3IpzQjFOztJe464_eMBmDHfT0YTWK5Qa&amp;jump_from=webapi" target="_blank" rel="noopener noreferrer" class="footer__link-item">QQ Group - 390083213<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blog.usthe.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tom Blog</a></li><li class="footer__item"><a href="https://github.com/usthe" target="_blank" rel="noopener noreferrer" class="footer__link-item">USTHE<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/tomsun28" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tom<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://github.com/dromara" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon64.svg" alt="Open Source Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="https://cdn.jsdelivr.net/gh/usthe/sureness@gh-pages/img/icon64.svg" alt="Open Source Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">Apache License 2.0 | Copyright © 2022</div></div></div></footer></div>
<script src="/sureness/assets/js/runtime~main.98bdab67.js"></script>
<script src="/sureness/assets/js/main.d214d83c.js"></script>
</body>
</html>